#!/usr/bin/pugs

use v6;

sub finger (@arr) returns Str {
		my @default = (
		"a joy",
		"a toy",
		"a love letter to the Cabal",
		"especially cute as a puppy", 
		"a reason to smile",
		"a \"Good Morning\" to a sleepy programmers' community",
		"cleans up nicely in the shower",  
		"a coffee-cup against the wall",
		"a marvel",
		"a miracle",
		"a \"Hello Perl!\" from Haskell",
		"a wonder",
		"proof of the concept of a perly functional language",
	  "a grab-bag of new ways to shoot yourself in the foot",
		);
	  pick any @arr || @default
}

{
 my $iter = 0;
 my $str  = '';
 multi sub report () returns Str {my $a = $str; $str = ''; $iter=0; $a;} 
 multi sub report (*$x, *@x) returns Void {
 	$iter++;
	if(@x){
		$str ~= addtolist($x);
	}else{
		$str = lastpass($x,$str,$iter);
	}
	report @x;
 }
}

#Stevan's "cls"
sub clear returns Void {
	system(($?OS eq any<MSWin32 mingw cygwin>) ?? 'cls' :: 'clear');
}

sub max (Array @x) returns Int{
	my $max;
	for @x->$try{
	$max =	$max > $try ?? $max :: $try; 
	}
	$max
}	

sub whisper_about (Int $sizeof_crowd, Array ?@x) returns Hash {
    my %terms;
    for 1 .. $sizeof_crowd {
        %terms{finger(@x)}++;
    }
    %terms
}

sub addtolist ($x){
	" $x,";	
}

sub lastpass ($x,$string,$pass){
  my $rwstring = $string; 
	if $pass > 1 {
		chop $rwstring;
		"$rwstring and $x"; 
	}else{
	  "$rwstring $x";
	}
}

sub matchval ($x,%x) returns Array {
	my @matches;
	for (%x.pairs)->$pair{
		if $pair[1] eq $x { push @matches,$pair[0] }  
	}
	@matches
} 

sub parse_args ($x) returns Array {
	my @args = split ',', $x;
	@args
}

1;
=end


