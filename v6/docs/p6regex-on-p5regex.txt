Perl6regex on Perl5regex

### Note: This Document is a Draft

------------------
Introduction:

"Perl6regex-on-Perl5regex" is a "Perl 6 regex engine" that uses Perl 5 regexes to implement the matching, and Perl 5 code to implement the OO "Match" structure.

The implementation so far is compatible with Perl 5.8.8.


------------------
The compilation is implemented as follows:

- a regex Grammar is run on the Perl 6 regex source code, and returns an AST

- the AST is annotated for positional capture numbering, and for "capture to array" flags

- the Perl 5 regexes and the Perl 5 methods are emitted


------------------
At runtime:

- while the regex is matching, it generates a linked list of operations

- the operation list is rolled-back on backtracking.
"Safe-backtracking" is implemented with "local" redeclarations inside the Perl 5 regex (see [1], [2]).

- after the match finishes, the operations are interpreted, and the result is a Match object.
The interpreter is implemented on a subroutine in the Match class.


------------------
The operations mini-language is implemented like this:

op-list
... TODO ...

------------------
TODO list:

* subrule caturing/non-capturing; subrule parameters
* backtracking controls; token/rule/regex
* Matcher method; $_ and $/ scopes (implement OUTER::<...>)
* $<xxx> inside closures in regex; read-write
* infix:<~~>

------------------
Blogs:

http://pugs.blogs.com/pugs/2007/07/perl6-regex-on-.html

------------------
References:

[1] http://www.justatheory.com/computers/programming/perl/regex_named_captures.html

[2] perldoc perlre
