Compile-Time objects

See Also: S06 

The compile-time system builds a 'Program' object.

"$program" stringifies to compiled code.

Environment

- contains the declarations in scope: variables, subroutines
- maybe contains also 'want'.

Methods

."" (overloaded stringification) - stringifies to source code
.box - creates a boxed object. Example: int.box -> Int
.WHAT - returns the class as a Class (which stringifies to the class name)
.perl - returns a Str, which contains the object dumped as Perl6 source code  

Coercions

.str .num .int .bool
.array .hash .scalar

Class-specific operations - for example:

.print - returns the code to execute '.print'
.true
.not
.== (encoded to ASCII, as '_61__61_')
.eq

Container operations

.bind( $container )
.set( $value )
.bind_from - returns this container's cell 
.[] .array
.{} .hash
.[ $value ]
.{ $value }

--------------

Classes

See also: S06:Built-in Types

Native types

...


Undefined types

...


Immutable types

Seq
List
...

Mutable types

Array
Hash
...

Other types - See S06

Value types, Implementation types, Hierarchical types, Polymorphic types, Parameter types, Generic types, Return types

Special Classes

These classes are used internally to optimize the implementation, by moving boxing and type-checks to compile-time.

(Type)Scalar - a typed Scalar
  ArrayScalar
  HashScalar

(Type)Seq - a typed Seq 
  ArraySeq
    - An Array that doesn't contain Lazy components. This can be represented by a Perl5 Array.
  HashSeq

(Type)Expression - a typed expression
  AnyExpression 
  BoolExpression
  IntExpression
  StrExpression
  ...
  ArrayExpression
  HashExpression

NamedScalar - '$a'
  A Scalar called by name

NamedArray - '@a'
  An Array called by name

NamedHash - '%h'
  A Hash called by name

(TODO)
  A Hash that only has Stringified keys. This can be represented by a Perl5 Hash.

--------------

Miscellaneus 

* use ::unicode_sub sub {...} to define methods with non alphanumeric names

--------------

Data Structures for Pure-Perl Scalars

-- Run time

    $$a - a Scalar's value - '=' lvalue or rvalue
    $a  - a Scalar's cell  - ':=' lvalue or rvalue

-- Compile time objects

    $$a - an Expression object
        - AnyExpression, IntExpression, ...
        - or, NamedRValue
    $a  - a NamedScalar object

        $a  = Array... 
                   - NamedArray scalar cell
      ${$a} = \@a  - NamedArray list (@a[]) or ArrayScalar ($a[])
      ${$a}->[1]   - ScalarExpression
    ${${$a}->[1]}  - RValueExpression

-- Method examples

    $a->set(...)
        - call .set method on $a's cell, with optional type checking
    $a->bind(...)
        - call .bind method on $a, with optional type checking

    $$a->str()
        - call stringification method on $a's value

